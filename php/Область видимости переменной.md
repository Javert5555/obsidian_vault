## Переменные в блоках цикла и условных конструкций

Блоки циклов и условных конструкций не образуют отдельной области видимости, и переменные, определенные в этих блоках, мы можем использовать вне этих блоков:

```php
for ($i=0; $i < 10; $i++) {
	continue;
}
var_export($i); // 10

if (true) {
	$test = 22;
}
var_export($test); // 22
```

## Локальные переменные

Локальные переменные создаются внутри функции. К таким переменным можно обратиться только изнутри данной функции.

```php
$foo = function() : void {
    $test = 1;
    var_export($test); // 1
};
$foo();

var_export($test); // Warning: Undefined variable $test

function foo1() : void {
    $test1 = 11;
    var_export($test1); // 11
};
foo1();

var_export($test1); // Warning: Undefined variable $test1
```

## Статические переменные

На локальные переменные похожи статические. Они отличаются тем, что после завершения работы функции их значение сохраняется. При каждом новом вызове функция использует ранее сохраненное значение. Чтобы указать, что переменная будет статической, к ней добавляется ключевое слово static.

```php
function counter() : void {
    static $count = 0;
    $count++;
    var_export($count);
}

counter(); // 1
counter(); // 2
counter(); // 3
```

## Глобальные переменные

Глобальные переменные в PHP — это переменные, доступные всей программе, включая подпрограммы (пользовательские функции). Они отличаются от локальных переменных, которые определены внутри функции и доступны только в пределах этой функции.

### Основные понятия

1. **Локальные переменные**:
   - Определяются внутри функции.
   - Доступны только внутри функции, в которой они определены.

```php
 function myFunction() {
	 $localVariable = "Hello";
	 echo $localVariable; // Выводит "Hello"
 }
```

2. **Глобальные переменные**:
   - Доступны всей программе, включая подпрограммы.
   - Необходимо объявлять глобальными внутри функции, если функция будет использовать эти переменные.

```php
$globalVariable = "Hello";

function myFunction() {
	global $globalVariable;
	$globalVariable = "World";
	echo $globalVariable; // Выводит "World"
}
echo $globalVariable; // Выводит "World"
```

### Использование суперглобальных переменных

В PHP есть суперглобальные переменные, которые доступны в любом месте скрипта без необходимости использования ключевого слова `global`. Одним из примеров суперглобальной переменной является массив `$GLOBALS`, который содержит ссылки на все переменные, определённые в текущей области видимости скрипта.

Пример использования `$GLOBALS`:
```php
$a = 1;
$b = 2;

function Sum() {
    $GLOBALS['b'] = $GLOBALS['a'] + $GLOBALS['b'];
}

Sum();
echo $b; // Выводит 3
```

### Изменения в PHP 8.1.0

В PHP 8.1.0 статические переменные в унаследованных методах теперь ведут себя как статические свойства. Это означает, что унаследованный метод будет использовать статические переменные совместно с родительским методом.

Пример:
```php
<?php
class Foo {
    public static function counter() {
        static $counter = 0;
        $counter++;
        return $counter;
    }
}

class Bar extends Foo {}

var_dump(Foo::counter()); // Выводит 1
var_dump(Foo::counter()); // Выводит 2
var_dump(Bar::counter()); // Выводит 3
?>
```

### Примеры и заметки

- **Пример использования `$GLOBALS` до PHP 8.1.0**:
  ```php
  <?php
  $a = 1;
  $globals = $GLOBALS;
  $globals['a'] = 2;
  echo $a; // Выводит 2
  echo $globals['a']; // Выводит 2
  echo $GLOBALS['a']; // Выводит 2
  ?>
  ```

- **Пример использования `$GLOBALS` после PHP 8.1.0**:
  ```php
  <?php
  $a = 1;
  $globals = $GLOBALS;
  $globals['a'] = 2;
  echo $a; // Выводит 1
  echo $globals['a']; // Выводит 2
  echo $GLOBALS['a']; // Выводит 1
  ?>
  ```

### Важные заметки

- **Суперглобальные переменные не могут быть параметрами функций**:
  ```php
  function foo($_GET) {
      // Ошибка: не может быть параметром функции
  }
  ```

- **Суперглобальные переменные не могут быть переопределены**:
  ```php
  function foo($_GET) {
      // Ошибка: не может быть переопределена
  }
  ```

Глобальные переменные в PHP позволяют обеспечить доступ к переменным из любого места скрипта, что может быть полезно для общей конфигурации или для передачи данных между функциями. Суперглобальные переменные, такие как `$GLOBALS`, упрощают доступ к глобальным переменным, не требуя использования ключевого слова `global`.