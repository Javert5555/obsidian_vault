# Семестр 2
# Лекция 1
# Обзор Российских ОС

Всё программное обеспечение можно условно разделить на 2 категории: системное и прикладное.
Системное ПО представляет среду и сервисы для работы прикладного ПО. Именно на уровне системного ПО решаются базовые вопросы обеспечения надежной и безопасной работы приложений. Представителем системного ПО являются ОС. Классы устройств для которых сущ. ОС:
- СЕРВЕРЫ
- рабочие станции
- мобильные устройства
- системы хранения данных
Практика производителей заключается в выпуске как серверных, так и клиентских дистрибутивов одновременно, поэтому иногда эти две категории могут быть объединены в один класс продуктов

## ОС Альт

Разработчик "Альт СПО"

ОС Альт Рабочая станция, Альт Сервер, Альт 8 СП входят в Единый реестр российских программ и БД, сто предоставляет больше возможностей развёртывания и миграции как инфраструктуры, так и парка серверов и ПК организациям осуществяющим закупки в соответсвие с 44 ФЗ

Альт 8 СП - это дистрибутив ОС для серверов Альт 8 СП Сервер и рабочих станций Альт 8 СП Рабочая станция со встроенными прогр средствами защиты инф., сертифицированный в стек России на базе линукс, включает полный пакет офисных приложений, серверная версия может использоваться для управления гидрогенными сетями и бездисковыми клиентами, а также выполнять роль рабочей станции разработчика. Выпускается для след. аппаратных платформ: Intel i586/x86, Э...

Альт 8 СП является ОС типа А, соответствует требованиям документов "Требование безопасности инф. к ОС" и "И профиль защиты ОС типа А 4 класса защиты". ОС Альт 8 СП обеспеч требования по безопасности по инф по 4 уровню доверия. Дистр. Альт8 включен в единый реестр Российских программ для электронных вычислительных машин и БД. ОС Альт 8 СП в соответсвии с нормативных правовым актом требования безопасности к ОС:
- для обеспечения выполнения программ в защитной среде
- для работы со средствами виртуализации
- для применения в гос. инф. системах 1-го класса защищённости
- для применения в автоматизированных системах управления производственными и техн процессами 1-го класса защищённости
- для применения в инф. системах персональных данных, при необходимости обеспечения  1-го уровня защищённости персональных данных
- для применения в инф. системах общего пользования 2-го класса

## Astra Linux

Разработчик ОО "Рус Бит Тех Авто"

Релизы Astra Linux SE - единственная русская ОС сертифицированная всеми 3 регулят. инф без.: фсб, фтэк, мо.
Astra Linux Orel - версия ОС общего назначения без усиленных средств защиты данных.

Astra Linux SE для применения в IT в астре предусмотрены 3 варианта централивзованных систем управления аутентификации и безопасностью. Собственный домен.

ОС в полной мере поддерживает стандарт аутентификаций Kerberos.
Серверная версия продукта  имеет большой набор для серверных приложений.
Имеет интерфейс Fly? который для быстрой работы не требует высокой производительности ПК, Встроенное средство управления виртуализацией и иные, что позволяет без доп. затрат развернуть среду виртуализации. Представляет собой единую платформу для устройств с процессорной архитектурой x86-64 ноутбуков, пк и серверов, мобильных устройств, встраиваемых спецвычислителей, маршрутизаторов и межсетевых экранов.
## Astra Linux SE

Набор входящих в ос прил. обеспечивает:
- систем убд
- пакетов программ электронной почты
- web-серверов и серверов эл почты
- косплексов по для резервного копирования
- пакетов офисных программ для работы с докумментами и др

Система не требует применения наложенных средств защиты и оптимально подходит для
- госинф систем и торговых площадок
- компонентов критической инф ифраструктуры
- систем для работы с гос. тайной, в том числе с грифом особой важности
- инф систем для обработки персональных данных

Соответсвие требования регуляторов обеспечивают:
- встроенная система безопасности PARSEC
- мандатное разграничение доступа
- изоляция модулей
- изоляция модулей
- очистка перативной и вешней памяти и гарантированное удаление файлов
- маркировка документов 
- регистрация событий
- защита инф. в графической подсистеме
- ограничение действий пользователя
- защита адресного пространства процессов 
- контроль замкннутости программной среды и целостности
- средства организации единого пространства пользователей
- защищенная среда виртуализации
- защищённая среда виртуализации
- защищённая реляционная СУБД
- защищенные комплексы программ эл. почты и гипертекстовой обработки данных
- средства для работы с мультимедиа

## ROSA Linux

Разработчик "НТЦ ИТ Роса"
три программных продукта: "Роса Хром", " Роса Кобальт" и Enterprise Linux Server.
Роса Хром - для работы с данными, содерж гостайну и включает большое кол-во технологий управления контролем доступа, обеспечения защиты регистрации и учёта
Роса Кобальт - для работы с конфиденц. инф коммерческих компаний и содержит аналогичный набор технологий.
Серверный дистрибутив этой ОС предназначен для широкого круга пользователей и не содержит сертифицированных средств защиты.
Семейство ОС РОСА "Кобальт", сертифицировано фтэк России В КЛИЕНТСКОМ И СЕРВЕРНОМ вариантах, рекомендуется для использования коммерческими структурами, проммышленными предприятиями и органами гос. власти, работая с конф. инф.. Средства защиты инф. обеспечивают идентификацию и аутентификацию управления доступом, регистрацию событий безопасности, ограничения программной среды изоляцию процессов, защиту памяти контроль целостности  надёжного функционирования и фильтрацию сетевого потока. Особенности:
- поддержка средств рабочего стола MATE и GNOME
- поддержка ipa и active directory
- возможность запуска виндовс-приложений
- система печати CUPS
- совместимость с СУСВ "ROSA Virtualization"
- набор прикладных программ, доступных сразу после установки ОС
- WEB-браузер firefox
- почтовый клиент
- офисные пакеты libre
- система вёрстки
- файловые менеджеры
- медиаплееры
- torrent-клиент
- графические редакторы GIMP
- программы для сканирования
- программа для записи дисков
- клиент мгновенных сообщений
- наличие утили ЗИ собственной разработки
- средство расширенного управления атрибутами ROSA
- средство шифрования инф. ROSA Crypto Tool
- средство гарантированного удаления файлов

## ОС ROSA Enterprise Desktop

Список основных программных компонетов:
- ядро Linux c долгосрочной поддержкой
- последняя актуальная версия рабочего стола KDE 4 с собственными доработками и возможностями двухфакторной аутентификацией
- браузеры Firefox-ESR и Chromium
- почтовый клиент Thunderbird с интегр. календарём и планировщиком Lighting
- офисный пакет libreoffice
- актуальные версии свободных и проприетарных драйверов для различных видеокарт
- менджер фотографий
- программа просмотра изображений
- граф. редактор
- средства надёжного восстановления системы
- аудио и видеопроигрыватели
- средства взаимодействия с машинами

Основные особенности:
- совместимость с популярными свободными прил.
- гибкость при развёртывании
- доступность исходных кодов
- возможность выбора между ядром 3.10 и 4.9 для лучшей совместимости с оборудованием
- наличие в репозитории ядер Linux 5.x
- официальная поддержка техническими специалистами ООО "РОСА"

## Ред ОС
Разработчик компании Ред Софт
Дистрибутив для серверов и рабочих пк, сертиф ФСТЭК система на базе ядра Linux, ориентированная на импользование в госинф системах до 1-го класса защищённости включительно и спдн до 1-го уровня защищённости включительно. Ред ОС обеспечивает безопасность обрабатываемых данных, соотв отечественным требованиям по защите инф., имеет преднастроенные конфигурации для каждой аппаратной архитектуру, использует алгоритмы ГОСТ - 34.11-2012, а так же поддерживает списки управления доступом. Поддерживает сетевую аутентификацию с помощбю подключаемых модулей аутентификации и имеет в своём составе специализированную подсистему распределённого аудита, которая позволяет отслеживать критические события безопасности корпоративной сети и предоставляет сисадмину необходимые инструменты для оперативного реагирования на инцеденты инф безопасности.

Kaspersky OS

# Лекция 2

# Управление памятью
Сформировать систематизировать представление о концепциях и принципах построения и управления локальными ресурсами ОС.
Вопросы:
1. Типы адресов
2. Методы распределения памяти без 

Память является важнейшим ресурсом, требующим управления со стороны мультипрограммной ОС. Распределению подлежит вся оперативная память, не занятая ОС. Фуекциями ОС по управлению память явл.:
- Отслеживание свободной и занятой памяти
- Выеделние памяти процессам и освобождение памяти, при завершении процессов. Вытеснение процессов и оперативной памяти на диск, когда размеры основной памяти не достаточны для размещения в ней всех процессов
- А также настройка адресов программы на конкретную область физической памяти

## Типы адресов

Для идентификации переменных и команд используются символьные имена, виртуальные имена и физические.

Символьные имена присваивает пользователь при написании программы на алгоритмическом языке.

Виртуальные адреса вырабатывает транслятор, переводящий программу на машинный язык, так как во время трансляции неизвестно какое место оперативной памяти будет загружена программа, то транслятор присваивает переменным и командам условные адреса, начиная с нулевого адреса. Совокупность виртуальных адресов процесса называется виртуальным адресным пространством, каждый процесс имеет собственное виртуальное адресное пространство

![[Pasted image 20230314180455.png]]

## Переход от виртуальных адресов к физическим

Физические адреса соответствуют номерам ячеек оперативной памяти, где в действительности расположены или будут расположены переменные и команды. Переход от виртуальных адресов к физическим может осуществляться двумя способами:

1. В первом случае замену виртуальных адресов на физические делает специальная системная программа - перемещающий загрузчик. Перемещающий загрузчик на основании имеющихся у него исходных данных о начальном адресе физической памяти, в которую предстоит загружать программу, и информации, предоставленной транслятором об адресно-зависимых константах программы, выполняет загрузку программы, совмещая ее с заменой виртуальных адресов физическими.
2. Второй способ заключается в том, что программа загружается в память в неизмененном виде в виртуальных адресах, при этом операционная система фиксирует смещение действительного расположения программного кода относительно виртуального адресного пространства. Во время выполнения программы при каждом обращении к оперативной памяти выполняется преобразование виртуального адреса в физический. Второй способ является более гибким, он допускает перемещение программы во время ее выполнения, в то время как перемещающий загрузчик жестко привязывает программу к первоначально выделенному ей участку памяти. Вместе с тем использование перемещающего загрузчика уменьшает накладные расходы, так как преобразование каждого виртуального адреса происходит только один раз во время загрузки, а во втором случае - каждый раз при обращении по данному адресу.

## Методы распределния памяти:

Без использования внешней памяти:
- Фиксированными разделами
- Динамическими разделами
- Перемещаемыми разделами
С использованием внешней памяти:
- Страничное распрделение
- Сегметное распределение
- Сегментно-страничное распределение

## Распределение памяти фиксированными разделами

Самым простым способом управления оперативной памятью является разделение ее на несколько разделов фиксированной величины. Это может быть выполнено вручную оператором во время старта системы или во время ее генерации. Очередная задача, поступившая на выполнение, помещается либо в общую очередь (рисунок 2.9,а), либо в очередь к некоторому разделу (рисунок 2.9,б).

![[Pasted image 20230314181203.png]]
Распределение памяти фиксированными разделами:   
а - с общей очередью; б - с отдельными очередями

Подсистема управления памятью в этом случае выполняет следующие задачи:
- сравнивая размер программы, поступившей на выполнение, и свободных разделов, выбирает подходящий раздел,
- осуществляет загрузку программы и настройку адресов.

При очевидном преимуществе - простоте реализации - данный метод имеет существенный недостаток - жесткость. Так как в каждом разделе может выполняться только одна программа, то уровень мультипрограммирования заранее ограничен числом разделов не зависимо от того, какой размер имеют программы. Даже если программа имеет небольшой объем, она будет занимать весь раздел, что приводит к неэффективному использованию памяти. С другой стороны, даже если объем оперативной памяти машины позволяет выполнить некоторую программу, разбиение памяти на разделы не позволяет сделать этого.

## Распределение памяти разделами переменной величины

В этом случае память машины не делится заранее на разделы. Сначала вся память свободна. Каждой вновь поступающей задаче выделяется необходимая ей память. Если достаточный объем памяти отсутствует, то задача не принимается на выполнение и стоит в очереди. После завершения задачи память освобождается, и на это место может быть загружена другая задача. Таким образом, в произвольный момент времени оперативная память представляет собой случайную последовательность занятых и свободных участков (разделов) произвольного размера. На рисунке показано состояние памяти в различные моменты времени при использовании динамического распределения. Так в момент t0 в памяти находится только ОС, а к моменту t1 память разделена между 5 задачами, причем задача П4, завершаясь, покидает память. На освободившееся после задачи П4 место загружается задача П6, поступившая в момент t3.

## Распределение памяти динамическими разделами

![[Pasted image 20230314181437.png]]

В произвольный момент времени оперативная память представляет собой случайную последовательность занятых и своюодных участков произвольного размера. Программный код не перемещается во время выполнения то есть может быть проведена единовременная настройка адресов посредством использования перемещающего загрузчика.

### Задачами операционной системы при распределении памяти динамическими разделами:

1. Ведение таблиц свободных и занятых областей, в которых указываются начальные адреса и размеры участков памяти,
2. При поступлении новой задачи - анализ запроса, просмотр таблицы свободных областей и выбор раздела, размер которого достаточен для размещения поступившей задачи,
3. Загрузка задачи в выделенный ей раздел и корректировка таблиц свободных и занятых областей,
4. После завершения задачи корректировка таблиц свободных и занятых областей.

### Правила для выбора раздела памяти

Выбор раздела для вновь поступившей задачи может осуществляться по разным правилам, таким, например, как "первый попавшийся раздел достаточного размера", или "раздел, имеющий наименьший достаточный размер", или "раздел, имеющий наибольший достаточный размер". Все эти правила имеют свои преимущества и недостатки.

Достоинства гибкость метода; недостаток: фрагментация.
### Недостаток метода

По сравнению с методом распределения памяти фиксированными разделами данный метод обладает гораздо большей гибкостью, но ему присущ очень серьезный недостаток - фрагментация памяти. Фрагментация - это наличие большого числа несмежных участков свободной памяти очень маленького размера (фрагментов). Настолько маленького, что ни одна из вновь поступающих программ не может поместиться ни в одном из участков, хотя суммарный объем фрагментов может составить значительную величину, намного превышающую требуемый объем памяти.

## Перемещаемые разделы

Одним из методов борьбы с фрагментацией является перемещение всех занятых участков в сторону старших либо в сторону младших адресов, так, чтобы вся свободная память образовывала единую свободную область. 

![[8znyLbF_BwU.jpg]]

Дополняния к функциям, которые выполняетс ОС при распределение памяти переменными разделами, она ещё должна время от времени копировать содержимое разделов из одного места памяти в другое - это называется сжатием. Сжатие может выполняться либо при каждом завершении задачи, либо тогда когда вновь поступившие задачи нет свободного раздела

### Достоинство
более эффективное использование памяти.

### Недостаток метода
Хотя процедура сжатия и приводит к более эффективному использованию памяти, она может потребовать значительного времени, что часто перевешивает преимущества данного метода.

# Методы распределения памяти с использованием дискового пространства

## Оверлеи

Уже достаточно давно пользователи столкнулись с проблемой размещения в памяти программ, размер которых превышал имеющуюся в наличии свободную память. Решением было разбиение программы на части, называемые оверлеями. 0-ой оверлей начинал выполняться первым. Когда он заканчивал свое выполнение, он вызывал другой оверлей. Все оверлеи хранились на диске и перемещались между памятью и диском средствами операционной системы. Однако разбиение программы на части и планирование их загрузки в оперативную память должен был осуществлять программист.

## Виртуальная память

Развитие методов организации вычислительного процесса в этом направлении привело к появлению метода, известного под названием виртуальная память. Виртуальным называется ресурс, который пользователю или пользовательской программе представляется обладающим свойствами, которыми он в действительности не обладает. Так, например, пользователю может быть предоставлена виртуальная оперативная память, размер которой превосходит всю имеющуюся в системе реальную оперативную память. Пользователь пишет программы так, как будто в его распоряжении имеется однородная оперативная память большого объема, но в действительности все данные, используемые программой, хранятся на одном или нескольких разнородных запоминающих устройствах, обычно на дисках, и при необходимости частями отображаются в реальную память.

Таким образом, виртуальная память - это совокупность программно-аппаратных средств, позволяющих пользователям писать программы, размер которых превосходит имеющуюся оперативную память; для этого виртуальная память решает следующие задачи:

- размещает данные в запоминающих устройствах разного типа, например, часть программы в оперативной памяти, а часть на диске;
- перемещает по мере необходимости данные между запоминающими устройствами разного типа, например, подгружает нужную часть программы с диска в оперативную память;
- преобразует виртуальные адреса в физические.

Все эти действия выполняются автоматически, без участия программиста, то есть механизм виртуальной памяти является прозрачным по отношению к пользователю.
Наиболее распространенными реализациями виртуальной памяти является страничное, сегментное и странично-сегментное распределение памяти, а также свопинг.

## Страничное распределение
Виртуальное адресное пространство каждого процесса делится на части одинакового, фиксированного для данной системы размера, называемые _виртуальными страницами._ В общем случае размер виртуального адресного пространства не является кратным размеру страницы, поэтому последняя страница каждого процесса дополняется фиктивной областью.

Вся оперативная память машины также делится на части такого же размера, называемые _физическими страницами_ (или блоками).

При загрузке процесса часть его виртуальных страниц помещается в оперативную память, а остальные – на диск. Смежные виртуальные страницы не обязательно располагаются в смежных физических страницах. При загрузке ОС создает для каждого процесса _информационную структуру_ – таблицу страниц, в которой устанавливается соответствие между номерами виртуальных и физических страниц для страниц, загруженных в оперативную память, или делается отметка о том, что виртуальная страница выгружена на диск. Кроме того, в таблице страниц содержится управляющая информация, такая как признак модификации страницы, признак невыгружаемости (выгрузка некоторых страниц может быть запрещена), признак обращения к странице (используется для подсчета числа обращений за определенный период времени) и другие данные, формируемые и используемые механизмом виртуальной памяти.

При каждом обращении к памяти происходит чтение из таблицы страниц информации о виртуальной странице, к которой произошло обращение. Если данная виртуальная страница находится в оперативной памяти, то выполняется преобразование виртуального адреса в физический. Если же нужная виртуальная страница в данный момент выгружена на диск, то происходит так называемое _страничное прерывание._

_Механизм преобразования виртуального адреса в физический  
__при страничной организации памяти_:
![[img00018.gif]]

Виртуальный адрес при страничном распределении может быть представлен в виде пары (p, s), где p - номер виртуальной страницы процесса (нумерация страниц начинается с 0), а s - смещение в пределах виртуальной страницы. Учитывая, что размер страницы равен 2 в степени к, смещение s может быть получено простым отделением k младших разрядов в двоичной записи виртуального адреса. Оставшиеся старшие разряды представляют собой двоичную запись номера страницы p.

Достоинства: отсутствие фрагментации.

_Недостатком_ данного метода распределения памяти является фрагментация на уровне сегментов и более медленное по сравнению со страничной организацией преобразование адреса.

# Лекция 4
## Файловая система
Файловая система - это чать операционной системы, назначение которой состоит в том, чтобы обеспечить совместное использование файлов несколькими пользователями и процессами. **Логическая запись** - это наименьший элемент данных, которым может оперировать программист при обмене с внешним устройством. Записи могут быть фиксированной длины или переменной длины. Записи могут быть расположены в файле последовательно или в более сложном порядке, с использованием так называемых индексных таблиц, позволяющих обеспечить быстрый доступ к отдельной логической записи (индексно-последовательная организация). Для идентификации записи может быть использовано специальное поле записи, называемое ключом.

### Логическая организация файла
Разработчик имеет дело с логической организацией файла, представляя файл в виде организованных логических записей, даже если физ. обмен с устройством осуществляется большими единицами, ОС обеспечивает программисту доступ к отдельной логической записи.

![[htmlconvd-Fi8TNH_html_d30e522c536af9a8.png]]

### Физическая организация и адрес файла

а) Физическая организация файла описывает правила расположения файла на устройстве внешней памяти, в частности на диске. Файл состоит из физических записей - блоков. Блок - наименьшая единица данных, которой внешнее устройство обменивается с оперативной памятью. Непрерывное размещение - простейший вариант физической организации (рисунок ниже а), при котором файлу предоставляется последовательность блоков диска, образующих единый сплошной участок дисковой памяти. Для задания адреса файла в этом случае достаточно указать только номер начального блока. Другое достоинство этого метода - простота. Но имеются и два существенных недостатка. Во-первых, во время создания файла заранее не известна его длина, а значит не известно, сколько памяти надо зарезервировать для этого файла, во-вторых, при таком порядке размещения неизбежно возникает фрагментация, и пространство на диске используется не эффективно, так как отдельные участки маленького размера (минимально 1 блок) могут остаться не используемыми.

б) Следующий способ физической организации - размещение в виде связанного списка блоков дисковой памяти (рисунок ниже, б ). При таком способе в начале каждого блока содержится указатель на следующий блок. В этом случае адрес файла также может быть задан одним числом - номером первого блока. В отличие от предыдущего способа, каждый блок может быть присоединен в цепочку какого-либо файла, следовательно фрагментация отсутствует. Файл может изменяться во время своего существования, наращивая число блоков. Недостатком является сложность реализации доступа к произвольно заданному месту файла: для того, чтобы прочитать пятый по порядку блок файла, необходимо последовательно прочитать четыре первых блока, прослеживая цепочку номеров блоков. Кроме того, при этом способе количество данных файла, содержащихся в одном блоке, не равно степени двойки (одно слово израсходовано на номер следующего блока), а многие программы читают данные блоками, размер которых равен степени двойки.

в) Популярным способом, используемым, например, в файловой системе FAT операционной системы MS-DOS, является использование связанного списка индексов. С каждым блоком связывается некоторый элемент - индекс. Индексы располагаются в отдельной области диска (в MS-DOS это таблица FAT). Если некоторый блок распределен некоторому файлу, то индекс этого блока содержит номер следующего блока данного файла. При такой физической организации сохраняются все достоинства предыдущего способа, но снимаются оба отмеченных недостатка: во-первых, для доступа к произвольному месту файла достаточно прочитать только блок индексов, отсчитать нужное количество блоков файла по цепочке и определить номер нужного блока, и, во-вторых, данные файла занимают блок целиком, а значит имеют объем, равный степени двойки.

г) В заключение рассмотрим задание физического расположения файла путем простого перечисления номеров блоков, занимаемых этим файлом. ОС UNIX использует вариант данного способа, позволяющий обеспечить фиксированную длину адреса, независимо от размера файла. Для хранения адреса файла выделено 13 полей. Если размер файла меньше или равен 10 блокам, то номера этих блоков непосредственно перечислены в первых десяти полях адреса. Если размер файла больше 10 блоков, то следующее 11-е поле содержит адрес блока, в котором могут быть расположены еще 128 номеров следующих блоков файла. Если файл больше, чем 10+128 блоков, то используется 12-е поле, в котором находится номер блока, содержащего 128 номеров блоков, которые содержат по 128 номеров блоков данного файла. И, наконец, если файл больше 10+128+128(128, то используется последнее 13-е поле для тройной косвенной адресации, что позволяет задать адрес файла, имеющего размер максимум 10+ 128 + 128(128 + 128(128(128.

![[htmlconvd-Fi8TNH_html_7c5ab6ceedbbb668.png]]
Физическая организация файла а - непрерывное размещение; б - связанный список блоков; в - связанный список индексов; г - перечень номеров блоков


### Права доступа к файлу
_**Определить права доступа к файлу**_ _-_ _**значит**_ _определить для каждого пользователя набор операций, которые он может применить к данному файлу._

_Различают два основных подхода к определению прав доступа:_
1.  **избирательный доступ**, когда для каждого файла и каждого пользователя сам владелец может определить допустимые операции;
    
2.  **мандатный подход,** когда система наделяет пользователя определенными правами по отношению к каждому разделяемому ресурсу (в данном случае файлу) в зависимости от того, к какой группе пользователь отнесен.

В самом общем случае права доступа могут быть описаны **матрицей прав доступа,** _в которой_ _**столбцы соответствуют всем файлам системы, строки - всем пользователям, а на пересечении строк и столбцов указываются разрешенные операции**_ (рисунок ниже).

![[img-WbL3os.png]]


### Кэширование диска
Подсистема буферизации представляет собой буферный пул, располагающийся в оперативной памяти, и комплекс программ, управляющих этим пулом. Каждый буфер пула имеет размер, равный одному блоку. При поступлении запроса на чтение некоторого блока подсистема буферизации просматривает свой буферный пул и, если находит требуемый блок, то копирует его в буфер запрашивающего процесса. Операция ввода-вывода считается выполненной, хотя физического обмена с устройством не происходило. Очевиден выигрыш во времени доступа к файлу. Если же нужный блок в буферном пуле отсутствует, то он считывается с устройства и одновременно с передачей запрашивающему процессу копируется в один из буферов подсистемы буферизации. При отсутствии свободного буфера на диск вытесняется наименее используемая информация. Таким образом, подсистема буферизации работает по принципу кэш-памяти.

### Общая модель файловой системы
Функционирование любой файловой системы можно представить многоуровневой моделью, в которой каждый уровень предоставляет некоторый интерфейс (набор функций) вышележащему уровню, а сам, в свою очередь, для выполнения своей работы использует интерфейс нижележащего уровня.

![[htmlconvd-UqlC0i_html_cda5c48b32cc3970.jpg]]

После определения номера физического блока, файловая система обращается к системе ввода-вывода для выполнения операции обмена с внешним устройством. В ответ на этот запрос в буфер файловой системы будет передан нужный блок, в котором на основании полученного при работе физического уровня смещения выбирается требуемая логическая запись.

Новая файловая система имеет многоуровневую структуру (рисунок 5.9), на верхнем уровне которой располагается так называемый переключатель файловых систем. Он обеспечивает интерфейс между запросами приложения и конкретной файловой системой, к которой обращается это приложение. Переключатель файловых систем преобразует запросы в формат, воспринимаемый следующим уровнем - уровнем файловых систем.

Каждый компонент уровня файловых систем выполнен в виде драйвера соответствующей файловой системы и поддерживает определенную организацию файловой системы. Переключатель является единственным модулем, который может обращаться к драйверу файловой системы. Приложение не может обращаться к нему напрямую. Драйвер файловой системы может быть написан в виде реентерабельного кода, что позволяет сразу нескольким приложениям выполнять операции с файлами. Каждый драйвер файловой системы в процессе собственной инициализации регистрируется у переключателя, передавая ему таблицу точек входа, которые будут использоваться при последующих обращениях к файловой системе.