Docker - это средство упаковки, доставки и запуска приложения.

Image (образ) Docker — это шаблон, доступный только для чтения, который содержит набор инструкций по созданию контейнера, который может работать на платформе Docker. Он предоставляет удобный способ упаковки приложений и предварительно настроенных серверных сред, которые вы можете использовать в личных целях или совместно использовать с другими пользователями Docker.

Образ контейнера Docker (Docker container image) — это легкий, автономный исполняемый пакет программного обеспечения, который включает в себя все необходимое для запуска приложения: код, среду выполнения, системные инструменты, системные библиотеки и настройки.

![[servlet.jpg]]


**Ключевое отличие образа Docker от контейнера заключается в том, что образ Docker — это неизменяемый шаблон, доступный только для чтения, который определяет, как будет реализован контейнер. Контейнер Docker — это экземпляр образа Docker во время выполнения, который создается при выполнении команды `docker run`.**

Полезные команды:

1. `docker ps` - выводит информацию о всех запущенных контейнерах.
	- `docker ps -a` - выводит информацию о всех контейнерах;
	- `docker ps -q` - выводит id запущенных контейнеров (`docker ps -qa`  - выводит id всех контейнеров);
	
2. `docker build /path` - создать Docker `image` из файла Dockerfile и «контекста». Контекст сборки — это набор файлов, расположенных по указанному пути (path) или URL-адресу.
	- `docker build -t image-name /path` - создать Docker `image` c названием `image-name`;
	
3. `docker run image-name` - создать и запустить новый контейнер из образа image-name.
	- `docker run --name container-name image-name` - создать и запустить новый контейнер с именем container-name из образа image-name;
	- `docker run -d image-name` - создать контейнер и запустить этот контейнер в режиме 'демон' (в фоновом режиме);
	- `docker run --rm image-name` - создать и запустить новый контейнер из образа image-name, после остановки (завершения) контейнера, удалить этот контейнер;
	- `docker run -p 8080:8000` - Чтобы опубликовать порт для нашего контейнера, необходимо использовать флаг --publish (-p для краткости) в команде запуска docker. Команда --publish имеет следующий формат: `[host port]:[container port]`. Итак, если бы мы хотели открыть порт 8000 внутри контейнера для порта 8080 снаружи контейнера, мы бы передали 8080:8000 флагу --publish;
	- `docker run -e VAR1=value1 --env VAR2=value2 image-name` - устанавливает простые переменные среды (не массивы) в контейнере, который вы запускаете, или перезаписывает переменные, определенные в Dockerfile образа, который вы запускаете;
	- `docker run -v /doesnt/exist:/foo -w /foo -i image-name` - Флаг -v монтирует текущий рабочий каталог в контейнер. 


Для завершения контейнера Docker предоставляет команды docker stop и docker kill. Обе команды docker kill и docker stop выглядят одинаково, но их внутреннее выполнение отличается. Команды docker stop выдают сигнал SIGTERM, тогда как команды docker kill отправляют сигнал SIGKILL.

4. `docker stop container` - остановить (завершить) один или несколько запущенных контейнеров (`container` - имя или id этого контейнера).
	- `docker stop $(docker ps -q)` - завершить все запущенные контейнеры;

5. `docker kill container` - остановить (убить) один или несколько запущенных контейнеров (`container` - имя или id этого контейнера).
	- `docker kill $(docker ps -q)` - завершить все запущенные контейнеры;

6. `docker rm` - удаляет контейнер по id или name.
	- `docker rm $(docker ps -qa)` - удалить все существующие контейнеры;
	- `docker rm $(docker ps -q)` - удалить все запущенные контейнеры;





```
docker run --rm --name web-app -d -p 127.0.0.1:8000:80 web-image
```
