
PHP является языком с динамической типизацией. Это значит, что тип данных переменной выводится во время выполнения, и в отличии от ряда других языков программирования в PHP не надо указывать перед переменной тип данных.

В PHP есть десять базовых типов данных:
1. bool (логический тип)
2. int (целые числа)
3. float (дробные числа)
4. string (строки)
5. array (массивы)
6. object (объекты)
7. callable (функции)
8. mixed (любой тип)
9. resource (ресурсы)
10. NULL (отсутствие значения)

Первые четыре являются скалярными: `bool, int, float, string`. Два типа являются составными (коллекционными): `array` (массивы) и `object` (объекты). Специальные типы: `callable` (функции), `mixed` (любой тип), `resource` (ресурсы), `NULL` (отсутствие значения).

## 1. Тип bool (логический тип)

Переменные логического типа могут принимать два значения: `true` и `false`.

В PHP все следующие значения принимают значение false:
1. Логическое значение false
2. Целое число 0 (ноль)
3. Число с плавающей точкой 0.0
4. Пустая строка '' и строка "0"
5. Null
6. Массив с нулевым количеством элементов array()
7. Объект без свойств и методов
8. Ресурс, который был закрыт или удалён
9. Значение NAN (Not a Number)

>[!info]
Значение, которое не является false, является true, включая все значения ресурсов (тип resource)

Можно использовать функцию `is_bool($var)`, чтобы проверить, является ли значение логическим.

## 2. int (целочисленный тип)

Кроме десятичных целых чисел PHP обладает возможностью использовать также двоичные, восьмеричные и шестнадцатеричные числа. Шаблоны чисел для других систем:
- шестнадцатеричные : 0\[xX]\[0-9a-fA-F]
- восьмеричные : 0\[0-7]
- двоичные : 0b\[01]

```php
$num_10 = 1; // десятичные
$num_16 = 0x9a; // шестнадцатеричные
$num_8 = 065; // восьмеричные
$num_2 = 0b0101; // двоичные
var_export("num_10=$num_10, num_16=$num_16, num_8=$num_8, num_2=$num_2")

-> 'num_10=1, num_16=154, num_8=53, num_2=5'
```

Переменная типа `int` занимает в памяти 32 бита, то есть может принимаь значения от -2 147 483 648 до 2 147 483 647. Если переменная получает числовое значение вне этого диапазона, то она трактуется как переменная типа `float`

Можно использовать функцию `is_float($var)` (или ее псевдоним `is_real($var)`), чтобы проверить, является ли значение числом с плавающей запятой.
## 3. Тип float (числа с плавающей точкой)

Размер числа с плавающей точкой зависит от платформы. Максимально возможное значение, как правило, составляет 1.8\*10308 с точностью около 14 десятичных цифр. Например:

```php
$num1 = 1.5;
$num2 = 1.3e4; // 1.3 * 10^4
$num3 = 6E-8; // 0.00000006
var_export("num1=$num1, num2=$num2, num3=$num3")

-> 'a1=1.5, a2=13000, a3=6.0E-8'
```

Можно использовать функцию `is_float($var)` (или ее псевдоним `is_real($var)`), чтобы проверить, является ли значение числом с плавающей запятой.

## 4. Тип string (строки)

Для работы с текстом можно применять строки. Строки бывают двух типов: в двойных кавычках и одинарных. От типа [[Основы#^c78eff|кавычек]] зависит обработка строк интерпретатором. Так, переменные в двойных кавычках заменяются значениями, а переменные в одинарных кавычках остаются неизменными.

```php
$var1 = 1;
$var2 = 2;
var_export('$var1 + $var2 <br>');
var_export("$var1 + $var2")

-> '$var1 + $var2'
-> '1 + 2'
```

Кроме обычных символов, строка может содержать специальные символы.

Можно использовать функцию `is_string($var)`, чтобы проверить, является ли значение строкой.

## 5. Массивы (array)

Массивы в PHP - это очень универсальная структура данных, которая может использоваться для представления различных типов коллекций.

### 5.0 Индексированные/Числовые массивы
- Это самый базовый тип массивов в PHP, где элементы хранятся в линейном порядке и доступны по числовым индексам, начиная с 0.
- Они могут хранить значения любого типа данных, включая другие массивы, объекты и т.д.
- Индексы массива автоматически назначаются, если не указаны явно, начиная с 0.

Пример:
```php
$numbers = [10, 20, 30, 40, 50];
echo $numbers[2]; // Вывод: 30
```

### 5.1 Ассоциативные массивы
- Это массивы, где элементы ассоциированы со строковыми ключами вместо числовых индексов.
- Они позволяют создавать "словари" или "карты", где каждое значение доступно по уникальному ключу.
- Ключи могут быть любыми допустимыми строками, а значения - любого типа данных.

Пример:
```php
$person = [
    "name" => "Иван",
    "age" => 35,
    "city" => "Москва"
];
echo $person["age"]; // Вывод: 35
```

### 5.2 Многомерные массивы
Это массивы, которые содержат другие массивы в качестве элементов, позволяя создавать сложные структуры данных. Они могут иметь несколько уровней вложенности, где каждый элемент доступен по нескольким индексам. Обход многомерных массивов, как правило, требует использования вложенных циклов.

```php
$data = [
    [1, 2, 3],
    [4, 5, 6],
    [7, 8, 9]
];
echo $data[1][2]; // Вывод: 6
```

Основные особенности:
- PHP предоставляет как длинный, так и короткий синтаксис для создания массивов.

```php
$foo = array(1,2,3); // array ( 0 => 1, 1 => 2, 2 => 3, )
var_export($foo);
$foo1 = [0 => 1, 1 => 2, 2 => 3];
var_export($foo1); // array ( 0 => 1, 1 => 2, 2 => 3, )
```

- Ключи массива могут быть целыми числами или строками, а значения - любого типа данных.

```php
$foo = [null => false, false => 'str', 'str' => 3];
var_export($foo); // array ( '' => false, 0 => 'str', 'str' => 3, )
var_export($foo[null]); // false
var_export($foo[false]); // 'str'
var_export($foo['str']); // 3
var_export($foo[$foo[null]]); // 'str'
```

- Массивы могут быть скопированы по ссылке, сохраняя статус ссылки для их элементов.

```php
$original_array = [ "name" => "Иван", "age" => 35, "city" => "Москва" ];
$copied_array = &$original_array;
$copied_array["age"] = 40;
echo $original_array["age"]; // Вывод: 40
```

Можно использовать функцию `is_array($var)`, чтобы проверить, является ли значение массивом.

## 6. object (объекты)

Можно использовать функцию `is_object($var)`, чтобы проверить, является ли значение объектом.

>[!info]
>В PHP анонимные функции (также известные как замыкания) являются объектами класса `Closure` и имеют тип `object`. Класс `Closure` предоставляет дополнительные возможности, такие как доступ к переменным из внешнего контекста (замыкание) _и возможность сериализации(преобразования структуры данных или объекта в строковое представление, которое может быть сохранено или передано)_.
>```php
$foo = function() {
>	var_export(1);
};
var_export(gettype($foo)); // 'object'
var_export(get_class($foo)) // 'Closure'
>```

## 7. callable (функции)



## 8. mixed (любой тип)



## 9. resource (ресурсы)
В PHP ресурсы используются для представления внешних ресурсов, таких как соединения с базами данных, файловые дескрипторы и области изображений.

**Типы ресурсов в PHP:**

- **stream:** Создаются функциями `fopen()` и `tmpfile()`, уничтожаются функцией `fclose()`. Также создаются функциями `popen()`, `fsockopen()` и `pfsockopen()`, уничтожаются функцией `pclose()`.
```php
// Открытие файла на чтение создает ресурс типа stream
$fp = fopen("example.txt", "r");

if ($fp) {
    var_export(is_resource($fp));
    fclose($fp); // Закрытие файла освобождает ресурс
}
```

- **socket:** Уничтожаются функцией `fclose()`.
```php
// Создание сокета
$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
if ($socket === false) {
    echo "Не удалось создать сокет: " . socket_strerror(socket_last_error()) . "\n";
} else {
    // ... дальнейшая работа с сокетом ...
    socket_close($socket); // Закрытие сокета освобождает ресурс
}
```

- **Сессия SSH2:** Создаются функцией `ssh2_connect()`, уничтожаются функцией `ssh2_disconnect()`.
```php
$connection = ssh2_connect('shell.example.com', 22);

if ($connection) {
  // ... дальнейшая работа с SSH соединением ...
  ssh2_disconnect($connection);
}
```

- **CUBRID:** Включают идентификатор соединения, ресурс, хранящий результат запроса, и ресурсы, содержащие результаты запроса типов BLOB/CLOB.

- **MySQL:** Идентификатор соединения для подключения к базе данных и ресурс, содержащий результат выполнения запроса.
```php
// Подключение к базе данных MySQL создает ресурс соединения
$conn = mysqli_connect("localhost", "username", "password", "database");

if ($conn) {
    // Выполнение запроса создает ресурс результата запроса
    $result = mysqli_query($conn, "SELECT * FROM таблица");

    // ... работа с результатами ...

    mysqli_free_result($result); // Освобождение памяти результата запроса
    mysqli_close($conn); // Закрытие соединения освобождает ресурс соединения
}
```

- **Memcache:** Идентификатор ссылки для подключения к кеш-серверу.

Для определения типа ресурса можно использовать функции `is_resource()` и `get_resource_type()`. Функция `is_resource()` определяет, является ли переменная ресурсом, а `get_resource_type()` позволяет получить тип ресурса.

При исчезновении последней ссылки на ресурс, PHP автоматически освобождает память и закрывает соединения.

## 10. Специальное значение null

Значение `null` указывает, переменная не имеет значения. Использование данного значения полезно в тех случаях, когда мы хотим указать, что переменная не имеет значения. Например, если мы просто определим переменную без ее инициализации, и затем попробуем ее использовать, то нам интерпретатор выдаст сообщение, что переменная не установлена:

Ошибка:
```php
var_export($a);
-> **Warning**: Undefined variable $a in **/var/www/html/index.php** on line **47**
-> NULL
```

Использование значения null поможет избежать данной ситуации. Кроме того, мы сможем проверять наличие значения и в зависимости от результатов проверки производить те или иные действия:
```php
$a = null;
var_export($a)
```

>[!info]
>Константа null не чувствительна к регистру, поэтому мы можем написать, как угодно: NULL, null, Null, NuLl и т.д.

Можно использовать функцию `is_null($var)`, чтобы проверить, является ли значение пустым (NULL), или можно использовать оператор `===` (идентичность):

```php
if (is_null($a)) {
	var_export('is null');
}
-> **Warning**: Undefined variable $a in **/var/www/html/index.php** on line **49**  
-> 'is null'

if ($a === null) {
	var_export('is null');
}
-> **Warning**: Undefined variable $a in **/var/www/html/index.php** on line **49**  
-> 'is null'

$a = null;

if (is_null($a)) {
	var_export('is null');
}
-> 'is null'

if ($a === null) {
	var_export('is null');
}
-> 'is null'
```

## 11*. Динамическая типизация

PHP - язык с динамической типизацией, поэтому мы можем присваивать одной и той же переменной значения разных типов:
```php
$num = 1;
var_export($num);
-> 1
$num = 'a';
var_export($num)
-> 'a'
```

https://metanit.com/php/tutorial/2.3.php

## Полезные методы

`is_numeric($a)` - возвращает значение `true`, если переменная $a представляет целое или действительное число или является строковым представлением числа.

```php
$a = 1;
$b = '1';
$c = "1.1";

var_export(is_numeric($a)); // true
var_export(is_numeric($b)); // true
var_export(is_numeric($c)); // true
```

`is_scalar($a)` - возвращает значение `true`, если переменная $a представляет один из простых типов: строку, целое число, действительное число, логическое значение.

```php
$a = 1;
$b = 'str';
$c = true;
$d = 1.1;
$e = null;

var_export(is_scalar($a)); // true
var_export(is_scalar($b)); // true
var_export(is_scalar($c)); // true
var_export(is_scalar($d)); // true
var_export(is_scalar($e)); // false
```

## Получение и установка типа переменной


Для получения типа переменной (или значения) применяется функция `gettype()`, которая возвращает название типа переменной:

```php
$foo = 1;
var_export(gettype($foo)); // 'integer'
var_export(gettype('')) // 'string'
```

С помощью функции `settype()` можно установить для переменной определенный тип. Она принимает два параметра: `settype("Переменная", "Тип")`. В качестве первого параметра используется переменная, тип которой надо установить, а в качестве второго - строковое описание типа, которое возвращается функцией `gettype()`. Если удалось установить тип, то функция возвращает `true`, если нет - то значение `false`.

```php
$foo = 11;
var_export($foo); // 11
$is_complete = settype($foo, 'string');
var_export($is_complete); // false
var_export($foo) // '11'
```

## Явные преобразования типов

В PHP могут применяться следующие преобразования:
- (int), (integer): преобразование в `int` (в целое число)
- (bool), (boolean): преобразование в `bool`
- (float), (double), (real): преобразование в `float`
- (string): преобразование в строку `string`
- (array): преобразование в массив `array`
- (object): преобразование в `object`

```php
$foo = 11;
$foo = (bool) $foo;
var_export($foo); // true
$foo = (string) $foo;
var_export($foo); // '1'
```