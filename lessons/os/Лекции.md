# Лекция 1
# Операционные системы. Основы

**Операционная система** - комплекс управляющих и обрабатывающих программ, которые с одной строны выступают как интерфейс между пользователями и приложениями и с другой стороны с аппаратным обеспечением, а также предназначены для управления устройствами и процессами, для эффективного распределения вычислительных ресурсов между процессами и организации надёжных вычислений.

ПО взаимодействует с ОС с помощью системных вызовов, это запросы на выполнение ОС каких-то действий.
Совокупность системных вызовов образует интерфейс API.

## Функции ОС
1. Предоставление интрфейсов пользователя для взаимодействия с аппаратурой.
2. Эффективное распределение ресурсов между процессами, управление процессами.
3. Управляет оперативной и внешней памятью.
4. Управление вводом выводом, обеспечение работы с переферийными устр-вами.
5. Обеспечение выполнения программ.
6. Обеспечение безопасности.
7. Организация сетевого взаимодействия.
8. Сохранение информации об ошибках системы.
9. Параллельное и псевдопараллельное выполнения задач.

## Требования к ОС
1. Масштабируемость.
2. Переносимость.
3. Совместимость.
4. Надёжность.
5. Производительность.

## Классификация
По сбособу организаций вычислений:
1. Системы пакетной обработке - формирует пакет задач.
2. Системы разделения времени - используется несколькими пользователями.
3. Системы реального времени - используется при решении задач нетерпящих задержек (либо выполняется либо команда просто не выполняется).
По типу ядра:
1. С монолитным ядром.
2. С микроядром.
3. С гибридным ядром.
4. Со смешанным ядром.
По особенностям использванного алгоритма управления прцессором:
1. Однозадачные
2. Многозадачные:
	а. Невытеснящей многозадачностью
	б. Вытеснящей многозадачностью
Также: Однопользовательские и многопользовательские/многопроцессорные и однопроцессорные/однопоточные и многопоточные.
Многопроцессорные:
1. Асиметричные
2. Симетричные
По поддержке сети:
1. Локальные
2. Сетевые
По роли в сетевом взаимодействие:
1. Клиентский
2. Серверный
По типу лицензии:
1. Открытые
2. Проприетарные
По области прменения:
1. Общего назанчения
2. Мобильные
3. ОС серверов
4. ОС маршрутизаторов
5. ОС мейнфреймов(больших компьютеров)
По особенностям аппартных платформ:
1. ОС пк
2. Мини компьютеров
3. Сетей
4. Айот устройств
5. Мобильных устройств
По семействам:
1. Unix подобные
2. Windows

## Структура ОС
Современные процессы имеют два режима работы: привелигированный и пользовательский.
В пользовательском режиме не доступны команды процессора, связанные с управлением аппартатным обеспечением, а также защитой оперативной памяти, аппаратным обеспечением и переключением режима работы процессора.

## Компоненты ОС:
1. Ядро.
2. Драйверы.
3. Системные библиотеки.
4. Оболочки и утилиты.
5. Загрузчик.(UEFI- микропрограмма встроенная в мат плату, которая управляет обородуванием на низком уровне и позволяет выполнить первоначальную настройку запуска пк).

*Вопросы для самостоятельной работы:*
1. Сравнительная характеристика BIOS и UEFI.(До 10 пунктов)
2. Эволюция ОС семейства Windows(типо с 60-х годов по десять лет примеры)
3. Эволюция ОС семейства Unix

*ДЗ:
Котнтрольные вопросы и пуНкт самостоятельные задачи*

# Ядро ОС

## Основыне понятия
Ядро - это (прграмма) центральная часть ОС, постоянно находящаяся в оперативной памяти и обеспечивающая приложениям координированный доступ к ресурсам, таким как: процессорное время, оперативная память, периферийные устройства и предоставляет сервисы файловой системы и сетевых протоколов.

## Функции ядра
1. Управление процессами.
2. Управление памятью.
3. Управление устройствами.
4. Управление прерываниями(сигнал, который поступает процессору о наступлении какого-либо процесса).
5. Выполнение операции ввода вывода.

Объект ядра - это блок пямяти, доступный только ядру для выполнения его целей, объект содержит: имя, класс защиты, счётчик пользователей, смещение в ОП и т.д.. Свойства объектов наследуются.


# Лекция 2
## Типы архитектур ядер
**Монолитное ядро** работает в едином адресном пространстве, это такаая схема при которой все составные части являются одной целой программы.

Недостатки: 1) сбой в одном компоненте программы вызывает сбой всей программы. 2) Из-за применения процедурного программирования, который подразумевает наследование от предыдущего кода занимает много памяти, следовательно падает производительность.

**Модульное ядро** - это модификация архитектуры монолитных ядер , которая оддерживает механизм поддержки модулей поддерживающих аппаратное обеспечение динамически (без перезагрузки ОС) или статически, но модули работают также в едином адресном пространстве поэтому модульность осуществляется на уровне бинарного образе, а не на архитектурном уровне ядра. Для динамической подгрузки/выгрузки модулей используется интерфейс API.

Недостатки: работа в едином адресном пространстве, ограничения связанные с применением API интерфейса
Плюсы: модульность выполнения кода, облегченная отладка.

**Микроядро** -современная архитектура ядра в котором присутствуют элементарные функции управления процессами и минимальный набор функций для управления оборудованием, большая часть работы осуществляется с помощью сервисных прграмм, которые являются специальными пользовательскими процессорами. Поэтому почти все драйвера и модули расположены в сервисных процессах и являются расширением ядра. Каждый модуль имеет своё адресное пространство. Такой тип архитектуры уменьшает размер ядра но скорость выполнения процессов и предоставления других услуг значительно меньшше чем в монолитных архитектурах

Достоинства: 
1) _расширяемостью_, которая присуща микроядерной операционной системе в очень высокой степени
2) _надежностью,_ так как каждый сервер выполняется в виде отдельного процесса в своей области памяти и таким образом защищен от других серверов операционной системы
3) поддержкой распределенных вычислений, так как используются механизмы, аналогичные сетевым
Недостатки:
1) Малая производительность.

В  ОС windows процессы, вынесенные на уровень пользователя называются сервисами, в ОС unix - демонами и работают в фоновом режиме

**Экзоядро** - тип ядра предоставляет только функции для взаимодействия между процессорами и безопасного выделения ресурсов, при этом API предоставляется внешними по отношению к ядру библиотеками.

Достоинства: доступ к устройствам на уровне контроллера;
Недостатки: нескольким прикладным программам нельзя предоставлять доступ для прямого управления памятью; низкоуровневый доступ затрудняет преносимость ОС.

**Наноядро** - выполняет обработку аппартных прерываний генерируемых устройствами компьютера. Результаты обработки передаёт вышестоящему ПО после обработки прерываний.

Достоинства: 
1) Простота реализации;
2) Надёжность
Недостатки:
1) Так как большую часть работ выполняют драйвера устройтсв соответсвенно и код становится сложнее.


**Гибридное ядро** - модифицированные микроядра.

**Смешанное ядро** - комбинация разных типов архитектур ядер.

## Виды ОС

**Сетевые ОС** - сетевая операционная система – это операционная система, которая обеспечивает обработку, хранение и передачу данных в информационной сети.

Компоненты сетевой ОС:
1) Сервер - предоставляет собстенные ресурсы и услуги в общее пользование;
2) Клиентская часть - средство управления локальными ресурсами компьютера, которая содержит компонент запроса доступа к удалённым ресурсам и услугам и их использование, эта часть выполняет распознавание и перенаправление в сеть запросов к удалённым ресурсам от приложений и пользователям, называется редиректором запрос от приложения или пользователя поступает в локальной форме, а передаётся в сеть в форме соответсвующей требованиям сервера и вобратном действии выполняет тоже.
3) Коммуникационная часть - обеспечивает адресацию и буферизацию сообщений, выбор маршрута передачи по сети, осуществляет надёжность передачи и т.д.

Типы сетевых ОС:
1) Одноранговые - все компьютеры равны в правах доступа к ресурсам друг друга
2) Двухранговые сети - сети, с выделенными серверами, которые не используются для выполнения текущих задач, а имеют специализированное назначение, например, сервер ббаз данных и т.д., при этом все другие ПК могут выполнять функции и клиента и сервера одновременно

**ОС реального времени** - это ОС в которой успешность работы любой программы зависит не только от её логической правильности, но и от времени, за которое она получила результат, если ситема не удовлетворяет врменным ограничениям, то должен быть зафиксирован сбой в её работе.

Типы ОСРВ:
1) Жёсткая (hard) ОСРВ: ОС которая может обеспевчить требуемое время выполнения задачи даже в худших условиях, не допускают задержек в системе, так как это моет привести к потере актуальности результатов и авариям. К ним относят системы управления бортового оборудования, системы аварийной защиты и регистраторы аварийных событий
2) Мягкая (soft) ОСРВ - может обеспечить требуемое время выполнения задач в среднем, характеризуются возможной задержкой реакции.



Вопросы на самост выполнение:
1) Какие типы архитектур ядер в современных ОС?
2) Архитектуры ОСРВ


## Отличительные черты ОСРВ
![[Pasted image 20221005143108.png]]

## Архитектуры осрв
![[Pasted image 20221005143502.png]]
![[Pasted image 20221005143518.png]]
![[Pasted image 20221005143530.png]]

## Основные сервисы
-   Управление задачами. Самая главная группа **сервисов**.
-   Динамическое распределение памяти. Многие (но не все) ядра **ОСРВ** поддерживают эту группу **сервисов**.
-   Управление таймерами.
-   Взаимодействие между задачами и синхронизация.
-   Контроль устройства ввода-вывода.


# Лекция 3

# Управление процессами

Процесс - это единица работы, требующая заявку на потребление системных ресурсов.

Функции подсистемы управления процессами:
1) Планирование выполнения процессов - распределние процессорного времени между несколькими одновременно существующими в системе процессорами
2) Создание и уничтожение процессов
3) Обеспечение процессов необходимыми системными ресурсами
4) Обеспечение взаимодействия между процессами

Процессы:
1) Рождение - процессу распределяется адресное пространство которое загружается в программный код, выделяются стеки системных ресурсов и устанавливается начальное значение программного счётчика этого процесса
2) Готовность - пассивное состояние процесса, когда он заблокирован в связи с внешними по отношению к нему обстоятельствами.
3) Ожидание - пассивное состояние процесса, когда он заблокирован по своим внутренним причинам и ждёт осуществление некоторого события
4) Исполнение - активное состояние процесса, при котором он обладает всеми необходимыми ресурсами и выполняется процессором
Выйти из состояния исполнения процесс может выйти по 3 причинам:
- ОС прекратила его деятельность
- Не может продолжить работы пока не наступит некоторое событие
- В результате возникновения прерывания в вычислительной системе
5) Смерть или завершения работы

## Контекст и дескриптор процесса

При создании процесса формируется некоторая структура данных, которая называется блоком управления процесса, который представляет собой модель процесса для ОС.

ПКБ состоит из контекста и дескпритора

Контекст - это содержимое всех ригистров процессора необходимое для восстановления состояния его операционнй среды в случае возобновления выполнения процессов. Включает в себя регистровый системный и пользовательский контекст процесса

Регистр процессора - сверхбыстрая память внутри процессора предназначенная для хранения просежуточных результатов вычисления и содержащая данные необходимые для работы процессора такие как: уровни доступа, смещение базовых таблиц, регистры сегментов памяти и т.д.

Дескриптор - оперативная информация, такая как: id процесса, состояние, приоритет, место нахождения кодового сегмента и смещения в этом сегмента.

Чтобы процесс выполнялся он должен быть загружен в оперативную память, выполняется процессором.

В очереди к ОП стоят дескрипторы отдельных процессов

Создать процесс со стороны ОС - это:
1) Создать информационнуе структуры, описывающие данные структуры, то есть ПКБ
2) Включить дескриптор нового процесса в очередь готовых процессов
3) Загрузить кодовый сегмент процесса в оперативную память

Виды процессов:
1) Процесс родитель - процесс который инициировал создание нового процесса, а созданный им процесс будет процессов ребёнком
2) Процесс зомби - дочерний процесс завершивший своё выполнение, но ещё присутствующий в списке процессов операционной системы, чтобы дать родительскому процессу считать код завершения.

Переключение контекста - для корректного переключения процессора с одного процесса на другой необходимо сохранить контекст исполняющегося процесса и восстановить контекст процесса на который будет переключен процессор.

## Уровни клонирования процессов